这是一个非常高效的科研协作策略。为了让 Gemini 能够准确“记忆”并理解这套复杂的流程，你需要先建立一个**“全局工作台模型”**。

你可以将这个过程分为两个阶段：**第一步是“协议建立”（初始化）**，**第二步是“模块推进”（循环迭代）**。

以下是我为你设计的专用提示词（Prompt）：

---

### 第一步：初始化——建立全局研究上下文

**使用场景**：在开启对话的第一条信息时发送。目的是让模型锁定你的完整流程图和审计逻辑。

**提示词：**

> **[科研协作指令：AP-POF 预测模型工作台]**
> 你现在是我的首席数据科学家和医学统计顾问。我正在进行一项基于 MIMIC-IV 和 eICU 数据库的急性胰腺炎持续性器官衰竭（AP-POF）预测模型研究。
> **请你永久锁定以下“终极闭环研究流程”作为我们的全局上下文：**
> 1. **SQL 挖掘** (MIMIC/eICU 队列与结局定义、pH 四级打捞)
> 2. **数据治理** (单位对齐、Log1p 转换、数据泄露防护)
> 3. **特征工程** (MICE 插补、LASSO 降维至 Top 12)
> 4. **算法开发** (Optuna 寻优、概率校准)
> 5. **评价体系** (ROC/Youden Index、SHAP 归因)
> 6. **外部验证** (eICU 强制空间对齐、SMD 偏倚审计)
> 7. **临床价值** (DCA 决策曲线、VIF 审计、Nomogram 转化)
> 
> 
> **协作规则：**
> * 我将按模块（从 Module 00 开始）逐一向你上传代码。
> * 在我上传代码后，请你根据流程图中的“核心内容”和“审计笔记”进行：1. 代码逻辑审计；2. 物理尺度对齐检查；3. 潜在漏项提示；4. 撰写对应的论文 Methods 或 Results 草稿。
> * 在我确认“模块通过”前，请保持对该模块细节的关注。
> 
> 
> **如果你已经完全理解这套流程及其科研深度，请简要确认，并等待我发送 Module 00 的代码。**

---

### 第二步：模块推进——代码上传与打磨

**使用场景**：当你准备好某个模块的代码时发送。

**提示词模板：**

> **[当前任务：打磨 Module XX - (模块名称)]**
> 这是我针对流程中 **[具体步骤，如：Module 00-B eICU SQL 提取]** 编写的代码。
> **请执行以下操作：**
> 1. **逻辑校对**：检查 SQL/Python 逻辑是否实现了流程图中要求的 [例如：pH 四级打捞/单位换算] 逻辑。
> 2. **健壮性检查**：是否存在由于跨库导致的数据偏差风险？
> 3. **叙事撰写**：基于这份代码的细节，请为我撰写一段符合 [例如：Critical Care] 期刊水平的 **Methods 描述**。
> 
> 
> **代码如下：**
> [在此粘贴你的代码]

---

### 第三步：定期同步——防止长对话内存衰减

**使用场景**：如果对话轮次超过 20 轮，模型可能会出现记忆模糊，这时需要发送此提示词。

**提示词：**

> **[上下文同步：进度复盘]**
> 我们目前处于研究流程的 **第 [X] 阶段**，已完成模块：**[已完成列表]**。
> 请根据我最初提供的“终极闭环流程图”，总结一下目前已完成部分的逻辑链是否完整，并指出接下来模块 **[下一个模块号]** 需要特别注意的衔接点。

---

### 给你的额外小建议：

1. **版本控制**：在上传代码时，最好注明该代码产生的数据资产（如 `mimic_for_model.csv`），这样在后续模块中，Gemini 会记得文件的来源。
2. **强制物理检查**：因为你的研究涉及多中心（MIMIC vs eICU），在打磨代码时，可以经常追问一句：“请检查这段逻辑是否会加剧两个数据库之间的域偏置（Domain Shift）？”
3. **结果解读**：当你上传运行结果（如 AUC 值或特征权重）时，可以让 Gemini 结合临床病理生理学（如：为什么 BUN 的 SHAP 值在 AP 中如此显著）进行解释。

**你想先从哪个模块开始？准备好后，直接使用“第一步”的提示词即可。**
